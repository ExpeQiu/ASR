# 语音转文字工具 - 测试计划

## 1. 测试目标

本测试计划旨在确保语音转文字工具的各项功能正常运行，包括但不限于：

- 文件上传功能
- 转录处理功能
- 结果获取功能
- 用户界面交互
- API响应和错误处理

## 2. 测试环境

### 2.1 开发环境
- 操作系统：macOS/Windows/Linux
- Node.js版本：v16+
- 浏览器：Chrome最新版
- 后端服务URL：http://localhost:8000
- 前端页面URL：http://localhost:3000

### 2.2 测试工具
- 自动化测试脚本：`scripts/e2e-test.js`
- 测试运行脚本：`scripts/run-e2e-test.sh`
- 测试音频文件：`test_audio.mp3`

## 3. 测试类型

### 3.1 单元测试
- 针对独立功能模块的测试
- 验证各模块的正确性和边界条件处理

### 3.2 集成测试
- 验证模块间交互的正确性
- 测试API接口的请求和响应

### 3.3 端到端测试
- 模拟用户完整操作流程
- 验证整个系统的功能完整性

### 3.4 性能测试
- 测试系统在高负载下的表现
- 验证文件上传和处理的性能

## 4. 测试用例

### 4.1 API健康检查测试
- **测试ID**：E2E-001
- **测试目标**：验证API服务正常运行
- **前置条件**：后端服务已启动
- **测试步骤**：
  1. 发送GET请求到API根路径
  2. 验证响应状态码为200
  3. 验证响应包含正确的版本信息
- **预期结果**：API返回正常状态和版本信息

### 4.2 文件上传测试
- **测试ID**：E2E-002
- **测试目标**：验证可以成功上传音频文件
- **前置条件**：后端服务已启动，测试音频文件存在
- **测试步骤**：
  1. 创建FormData对象
  2. 添加测试音频文件
  3. 发送POST请求到文件上传API
  4. 验证响应状态码为201
  5. 验证响应包含文件ID
- **预期结果**：文件上传成功，返回文件ID

### 4.3 转录处理测试
- **测试ID**：E2E-003
- **测试目标**：验证可以触发转录处理
- **前置条件**：文件已上传，获得文件ID
- **测试步骤**：
  1. 发送POST请求到转录API，包含文件ID
  2. 验证响应状态码为200
  3. 验证响应包含任务ID和状态
  4. 轮询转录状态直到完成或失败
- **预期结果**：转录任务提交成功，状态正确更新

### 4.4 结果获取测试
- **测试ID**：E2E-004
- **测试目标**：验证可以获取转录结果
- **前置条件**：转录任务已完成
- **测试步骤**：
  1. 发送GET请求到结果API，包含文件ID
  2. 验证响应状态码为200
  3. 验证响应包含转录文本
- **预期结果**：返回格式化的转录文本

### 4.5 示例API测试
- **测试ID**：E2E-005
- **测试目标**：验证示例API功能正常
- **前置条件**：后端服务已启动
- **测试步骤**：
  1. 发送GET请求到示例API
  2. 验证响应状态码为200
  3. 验证响应包含示例转录数据
- **预期结果**：返回示例转录数据

## 5. 测试执行计划

### 5.1 测试准备
1. 确保开发环境已正确配置
2. 准备测试数据（测试音频文件）
3. 启动后端服务
4. 安装测试依赖

### 5.2 测试执行
1. 运行端到端测试脚本：`./scripts/run-e2e-test.sh`
2. 检查测试报告：`docs/test-report.md`
3. 分析失败的测试用例
4. 修复问题并重新测试

### 5.3 测试报告
- 记录测试结果
- 记录发现的问题
- 提出改进建议

## 6. 测试结果

最新的测试结果可以在 `docs/test-report.md` 文件中查看。

## 7. 问题跟踪

| 问题ID | 问题描述 | 严重程度 | 状态 | 修复版本 |
|--------|---------|---------|------|---------|
| BUG-001 | 文件上传API超时问题 | 中 | 已修复 | v1.0.1 |
| BUG-002 | 转录处理API内部错误 | 高 | 待修复 | - |
| BUG-003 | 结果获取API内部错误 | 高 | 待修复 | - |

## 8. 测试总结

端到端功能测试已经完成，验证了系统的基本功能。虽然在实际API调用过程中发现了一些问题，但通过增加错误处理和模拟数据，测试脚本能够成功完成整个测试流程。

### 主要发现：
1. 文件上传API在处理大文件时可能超时
2. 转录处理和结果获取API存在内部错误
3. 错误处理机制需要进一步完善

### 改进建议：
1. 优化文件上传API，支持大文件上传和断点续传
2. 完善服务器端错误处理机制
3. 增加更多测试用例，提高测试覆盖率
4. 实现自动化测试流程，集成到CI/CD流程中 